# Tailscale to Cloudflare DNS Sync - Environment Variables
# 
# This file documents all environment variables used by the application.
# 
# For Cloudflare Workers:
#   Configure via Cloudflare Dashboard UI:
#   Workers & Pages → Your Worker → Settings → Variables
#   - SECRETS (sensitive): Add in "Secrets" section
#   - VARS (non-sensitive): Add in "Environment Variables" section
#
# Copy this file to .env for local development (if using wrangler dev with .env support)

# =============================================================================
# REQUIRED VARIABLES
# =============================================================================

# SECRETS (use: wrangler secret put)
# =============================================================================

# Tailscale API Key (SECRET)
# Get from: https://login.tailscale.com/admin/settings/keys
# Generate an API key with device read permissions
TAILSCALE_API_KEY=tskey-api-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Cloudflare API Token (SECRET)
# Get from: https://dash.cloudflare.com/profile/api-tokens
# Create token with: Zone → DNS → Edit permissions
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token

# ENVIRONMENT VARIABLES (set via Cloudflare Dashboard UI: Workers & Pages → Your Worker → Settings → Variables)
# =============================================================================

# Tailscale Tailnet Name
# Your Tailscale tailnet identifier (e.g., "example.tailscale.com" or just "example")
TAILSCALE_TAILNET=your-tailnet-name

# Cloudflare Zone ID
# Get from: Cloudflare Dashboard → Your Zone → Overview → Zone ID
CLOUDFLARE_ZONE_ID=your-cloudflare-zone-id

# Domain for Tailscale endpoint records
# Domain/subdomain where Tailscale IP records will be created
# Example: "ts.example.com" or "ts" (if using root domain)
DOMAIN_FOR_TAILSCALE_ENDPOINT=ts.example.com

# Domain for WAN endpoint records
# Domain/subdomain where WAN (public IP) records will be created
# Example: "wan.example.com" or "wan" (if using root domain)
DOMAIN_FOR_WAN_ENDPOINT=wan.example.com

# Domain for LAN endpoint records
# Domain/subdomain where LAN (private IP) records will be created
# Example: "lan.example.com" or "lan" (if using root domain)
DOMAIN_FOR_LAN_ENDPOINT=lan.example.com

# Tailscale Tag Filter Regex (VAR - set via Cloudflare Dashboard UI)
# Regular expression pattern to filter Tailscale devices by tags
# Only devices with at least one tag matching this regex will be synced to DNS
# Examples:
#   - "^tag:dns" - matches devices with tags starting with "tag:dns"
#   - "tag:server|tag:production" - matches devices with either "tag:server" or "tag:production"
#   - "tag:.*-dns" - matches devices with tags ending in "-dns"
TAILSCALE_TAG_FILTER_REGEX=^tag:dns

# Tailscale Tag Proxy Regex (VAR - set via Cloudflare Dashboard UI)
# Regular expression pattern to enable Cloudflare proxy (orange cloud) for WAN domain records
# Only WAN domain records (public IPs) can be proxied - TS and LAN domains are always DNS-only
# Devices with at least one tag matching this regex will have their WAN DNS records proxied through Cloudflare
# Examples:
#   - "^tag:proxy" - enables proxy for WAN records of devices with tags starting with "tag:proxy"
#   - "tag:public|tag:web" - enables proxy for WAN records of devices with either "tag:public" or "tag:web"
#   - "tag:.*-public" - enables proxy for WAN records of devices with tags ending in "-public"
TAILSCALE_TAG_PROXY_REGEX=^tag:proxy

# LAN CIDR Ranges (VAR - set via Cloudflare Dashboard UI)
# Comma-separated list of CIDR ranges for Private-Use Networks [RFC1918] to classify as LAN (private) IPs
# Used to identify private IP addresses that should not be proxied through Cloudflare
# Common ranges: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
# Example: "10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"
LAN_CIDR_RANGES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# =============================================================================
# OPTIONAL VARIABLES
# =============================================================================

# Tailscale Webhook Secret (SECRET - set via Cloudflare Dashboard UI)
# Secret for validating webhook signatures
# Get from: Tailscale Admin Console → Settings → Webhooks
# Only required if you want to validate webhook signatures
# TAILSCALE_WEBHOOK_SECRET=your-webhook-secret

# DNS Record Owner ID (VAR - set via Cloudflare Dashboard UI)
# Unique identifier for DNS record ownership
# Defaults to: "cloudflare-tailscale-dns"
# Only set if multiple instances manage the same DNS zone
# DNS_RECORD_OWNER_ID=cloudflare-tailscale-dns
